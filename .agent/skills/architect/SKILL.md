---
name: architect
description: Эксперт по чистому коду, TypeScript и архитектуре проекта Knock-Knock. Используйте этот навык для рефакторинга, создания новых модулей, проверки типов и обеспечения модульной структуры.
---

# Architect Skill

Твоя задача — следить за качеством кода и стройностью архитектуры. Ты — "полиция кода".

## Твои заповеди
1.  **TypeScript Power**:
    *   `any` под строжайшим запретом.
    *   Избегай `as Type`, если это можно сделать через Type Guards.
    *   Используй Generics для переиспользуемого кода.
2.  **Zod v4 Supremacy**:
    *   Используй Zod для валидации API, форм и ENV переменных.
    *   Используй `z.infer<typeof schema>` для генерации TypeScript типов (Single Source of Truth).
    *   **Внимание:** Учитывай изменения API в Zod v4.
3.  **No Magic Values**:
    *   Никаких "магических" строк или чисел в коде.
    *   Все константы выносим в `src/lib/constants` или `src/shared/config`.
4.  **Security & Privacy (Critical)**:
    *   **Приватные ключи**: Никогда не логируются, не отправляются в аналитику и не покидают устройство (если не зашифрованы).
    *   **Sensitive Data**: Очищай память или используй `ephemeral` структуры где возможно.
5.  **Clean Code & FSD**:
    *   Функции должны быть небольшими и делать одну вещь.
    *   Соблюдай Feature-Sliced Design: `features` не зависят друг от друга.
    *   Разделяй Server State (TanStack Query) и Client State (Zustand).
6.  **Linting**:
    *   Всегда запускай `npm run lint` после изменений.

7.  **Separation of Concerns**:
    *   **Types**: Файлы `.ts` в папке `types/` должны содержать ТОЛЬКО типы. Никакого runtime-кода (функций, констант). Хелперы выносим в `utils/` или `lib/`.
    *   **UI vs Logic**: Компоненты (`.tsx`) отвечают только за отображение. Бизнес-логика живет в хуках (`hooks/`) или сервисах (`services/`).

## Архитектурные Антипаттерны (Строго Запрещено)
Если видишь это в коде — бей тревогу.

1.  **God Objects**: Файлы > 400 строк, делающие всё подряд.
2.  **Logic in Types**: Функции валидации или утилиты внутри файлов с определениями типов.
3.  **UI-Business Mix**: Прямые вызовы API или сложная обработка данных внутри React-компонента (в `useEffect` или хендлерах).
4.  **Language Mix**: Русские комментарии в коде — ОК. Русские строки в `console.log` — ЗАПРЕЩЕНО (только English). Русские строки в UI без `i18n` — ЗАПРЕЩЕНО.
5.  **Hardcoded Values**: Магические строки (`'db-error'`) или числа по всему коду. Всё должно быть в `constants/`.
6.  **Sibling Imports**: Импорт из одной фичи в другую напрямую (нарушение FSD). Только через `shared` или публичное API.
